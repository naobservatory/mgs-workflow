/************************************************
| CONFIGURATION FILE FOR NAO VIRAL MGS WORKFLOW |
************************************************/

params {
    mode = "run_validation"

    // Directories
    base_dir = <PATH TO YOUR DIRECTORY> // Parent for working and output directories (can be S3)
    ref_dir = <PATH TO YOUR ORGS REFERENCE DIRECTORY> // Reference/index directory (generated by index workflow)

    // Files; Either viral_tsv or viral_fastq should be provided; if both are provided, the viral_tsv is defaulted to
    viral_tsv = <PATH TO 'virus_hits_db.tsv.gz` FROM OUTPUT OF RUN WORKFLOW>
    viral_fastq = <PATH TO YOUR FASTA FILE OF YOUR READS>

    // BLAST
    blast_viral_fraction = 1 // Fraction of putative viral reads to BLAST vs nt (0 = don't run BLAST)
    blast_db_prefix = "core_nt"
    blast_min_frac = 0.9 // Keep BLAST hits whose bitscore is at least this fraction of the best bitscore for that query
    blast_max_rank = 5 // Keep BLAST hits whose dense bitscore rank for that query is at most this value
    blast_perc_id = 60 // Percent identity threshold for BLAST hits
    blast_qcov_hsp_perc = 30 // Query coverage threshold for BLAST hits

    // Other
    single_end = false // is data single end or paired?
    drop_unpaired = false // Whether to drop reads from TSV that lack a pair sequence (otherwise replace with "N")
    random_seed = "" // Random seed for testing non-deterministic processes. Leave blank in non-test settings.
}

includeConfig "${projectDir}/configs/logging.config"
includeConfig "${projectDir}/configs/containers.config"
includeConfig "${projectDir}/configs/resources.config"
includeConfig "${projectDir}/configs/profiles.config"
includeConfig "${projectDir}/configs/output.config"
process.queue = <NAME OF YOUR AWS BATCH JOB QUEUE> // AWS Batch job queue
