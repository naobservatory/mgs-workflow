/************************************************
| CONFIGURATION FILE FOR NAO VIRAL MGS WORKFLOW |
************************************************/

params {
    mode = "run_validation"

    // Directories
    base_dir = "s3://nao-mgs-wb/test-remote" // Parent for working and output directories (can be S3)
    ref_dir = "s3://nao-mgs-wb/index/20241209/output" // Reference/index directory (generated by index workflow)

    // Files
    viral_tsv = "${projectDir}/test-data/gold-standard-results/virus_hits_filtered.tsv.gz"
    viral_fastq = ""

    // BLAST
    blast_viral_fraction = 1 // Fraction of putative viral reads to BLAST vs nt (0 = don't run BLAST)
    blast_db_prefix = "core_nt"
    blast_min_frac = 0.9 // Keep BLAST hits whose bitscore is at least this fraction of the best bitscore for that query
    blast_max_rank = 5 // Keep BLAST hits whose dense bitscore rank for that query is at most this value

    // Other
    drop_unpaired = false // Whether to drop reads from TSV that lack a pair sequence (otherwise replace with "N")
    random_seed = "" // Random seed for testing non-deterministic processes. Leave blank in non-test settings.
}

includeConfig "${projectDir}/configs/logging.config"
includeConfig "${projectDir}/configs/containers.config"
includeConfig "${projectDir}/configs/resources.config"
includeConfig "${projectDir}/configs/profiles.config"
includeConfig "${projectDir}/configs/output.config"
process.queue = "will-batch-queue" // AWS Batch job queue
